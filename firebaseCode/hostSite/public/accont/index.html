<!DOCTYPE html>
<html lang="ar">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Profile Card</title>

		<link
			rel="canonical"
			href="https://pricealerts.web.app/signin/index.html"
		/>
		<meta
			name="description"
			content="منصة Price Alerts لتنبيه أسعار العملات الرقمية والأسهم العالمية من عشر منصات تداول و 11 بورصة. تنبيهات فورية وسريعة."
		/>
		<meta
			name="keywords"
			content="تنبيه أسعار, عملات رقمية, أسهم, بورصة, تنبيهات سعر, تداول, Binance, KuCoin, nasdaq,nyse, OKX"
		/>
		<meta name="author" content="Price Alerts" />
		<meta name="robots" content="index, follow" />

		<!-- OG Meta for Social shares -->
		<meta
			property="og:title"
			content="Price Alerts - تنبيهات أسعار العملات الرقمية والأسهم"
		/>
		<meta
			property="og:description"
			content="تنبيهات سعرية فورية لـ 10 منصات تداول و 11 بورصة أسهم."
		/>
		<meta property="og:url" content="https://pricealerts.web.app/" />
		<meta property="og:type" content="website" />
		<meta
			property="og:image"
			content="https://pricealerts.web.app/imgs/web/apple-touch-icon.png"
		/>

		<title>حسابي</title>

		<link
			rel="stylesheet"
			href="https://pricealerts.github.io/style/navbar.css"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
			rel="stylesheet"
		/>

		<style>
			body {
				font-family: "Roboto", sans-serif; /* الخط المستخدم */
				background-color: #f0f2f5; /* لون الخلفية الفاتح */
				margin: 0;
                direction: rtl;
			}
			.navbar {
				padding: 20px;
			}

			.profile-container {
				display: flex;
				text-align: center; /* جعل النص في المنتصف */
				flex-direction: column;
				justify-content: center;
				align-items: center;
				margin: 40px;
				margin-top: 30px;
				padding: 20px;
			}

			
			
           
			/* تنسيق الاسم */
			.user-name {
				font-size: 28px; /* حجم الخط كبير */
				font-weight: 500; /* سمك الخط متوسط إلى عريض */
				color: #202124; /* لون أسود داكن (ليس أسود تماماً) */
				
				margin: 10px;
                padding: 10px;
                /* border: 1px solid #ccc;;
               border-radius: 5px; */
			}

			/* تنسيق البريد الإلكتروني */
			.user-email {
				font-size: 16px; /* حجم خط أصغر */
				color: #5f6368; /* لون رمادي */
				margin: 0;
				font-weight: 400; /* خط عادي غير عريض */
			}
			.chatIds {
				width: 70%;
				text-align: right;
				direction: rtl;
				font-size: 18px;
				margin: 20px;
			}
			.chatIds input {
				width: 90%;
				padding: 12px 15px;
				margin-bottom: 15px;
				border: 1px solid #ccc;
				border-radius: 6px;
				font-size: 1em;
				direction: rtl;
				text-align: right;
				transition: border-color 0.3s ease, box-shadow 0.3s ease;
			}
			.saveBtn {
				font-size: 20px;
				background: #007bff;
				border: none;
				border-radius: 5px;
				padding: 8px;
				color: white;
			}
		</style>
        <style>
            :root {
                --font-size: 10;
                --height-width-profile: 160;
                --border-radius-profile: 50;
                --height-img: 100;
            }
            /* تنسيق الصورة */
            .profile-photo {
                display: flex;
                width: calc(var(--height-width-profile) * 1px);
                height: calc(var(--height-width-profile) * 1px);
                border-radius:calc(var(--border-radius-profile) * 1%) ;
                object-fit: cover;
                overflow: hidden;
                background: linear-gradient(45deg, #1a3a6c, #4cc9f0);
                align-items: center;
                justify-content: center;
                color: white;
                font-size: calc(var(--font-size) * 7px);
                cursor: pointer;
                position: relative;
                margin-bottom:10px ;
            }
            .profile-photo img{
                height: calc(var(--height-img) * 1%);
            }
            .profile-photo:hover .imgCv {
                display: flex;
                flex-direction: column;
            }
            .imgCv {
                position: absolute;
                display: none;
                justify-content: center;
                align-items: center;
                border-radius: 50%;
                height: 100%;
                width: 100%;
                top: 0;
                left: 0;
                z-index: 3;
                cursor: pointer;
                background-color: #0000009e;
            }
            .imgCv img {
                height: 60px;
            }
            #errImg {
                color: red;
                display: none;
                font-size: calc(var(--font-size) * 2px);
                position: absolute;
                text-align: center;
            }
        </style>
	</head>
	<body>
		<div id="pirantCntynr" class="pirantCntynr"></div>
		<div class="profile-container">
			
			<div class="profile-photo">
							<label for="input-file" id="drop-area">
								<input type="file" accept="image/*" id="input-file" hidden />
								<div class="imgCv">
									<img src="../imgs/camera-square-svgrepo-com.svg" alt="" />
								</div>
							</label>
							<div id="errImg">Error upload Image</div>
							<img src="../imgs/user-svgrepo-com.svg" id="uploadedImage" ></img>
						</div>

			<h1 id="userNname" class="user-name" contenteditable="true">Mouhamed Slimani</h1>

			<p id="uerEmail" class="user-email">raki.chai3i@gmail.com</p>

			<div class="chatIds">
<label for="paswordInpt">كلمة السر</label>
				<br />
				<input
					type="password"
					id="paswordInpt"
					placeholder="كلمة السر"
				/>
				<br /><br />


				معرّفات دردشة التيليجرام (Chat ID) : الخاص بك
				<br /><br />
				<label for="telegramChatId1">Chat ID 1</label>
				<br />
				<input
					type="text"
					id="telegramChatId1"
					placeholder="أدخل معرّف دردشة تيليجرام"
				/>
				<br /><br />
				<label for="telegramChatId2">Chat ID 2</label>
				<br />
				<input
					type="text"
					id="telegramChatId2"
					placeholder="أدخل معرّف دردشة تيليجرام"
				/>
				<br /><br />
				<label for="telegramChatId3">Chat ID 3</label>
				<br />
				<input
					type="text"
					id="telegramChatId3"
					placeholder="أدخل معرّف دردشة تيليجرام"
				/>
			</div>
			<p id="rspns"></p>
			<button id="saveBtn" class="saveBtn">حفظ التغيرات</button>
		</div>

		<script src="https://pricealerts.github.io/js/navbar.js"></script>
       <!--  <script type="module" src="./jsCode/uplodImage.js"></script> -->
        <script>
            
            function gebi(el) {return document.getElementById(el);}//   https://drive.google.com/file/d/1jCfKYWrJP462N840a5juX-H8Uwj_HxCR/view
		//	UserImage
        gebi("uploadedImage").src = UserImage;
            gebi('userNname').innerText  = localStorage.UserName || 'إسمك' ;
               gebi('uerEmail').innerText  = localStorage.UserEmail || 'إيميلك'


            const inputFile = gebi("input-file");
			let imgCntnt;
			let file =UserImage ;
inputFile.addEventListener("change", async e => {
	 file = e.target.files[0];

	if (!file) {
		gebi("errImg").style.display = "block";
		return;
	}
	 imgCntnt = URL.createObjectURL(file);
	gebi("uploadedImage").src = imgCntnt;
});




const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwbQ2g5Rq3A2g51oTqBKqAu3LdAXXqWQ-KTGnjct0gENexQYt-p_Z5Ec1V-_ytZ6JDF/exec"; // رابط apps script

gebi('saveBtn').addEventListener("click", async (e) => {
	gebi('rspns').innerText = 'جاري الحفظ ...';
	gebi('rspns').style.color = 'black'
	/////////////////////////// jiht limage
     

    // 1 MB = 1,000,000 bytes (تقريبًا)
    const MAX_SIZE = 1 * 1024 * 1024; // أو 1_000_000

  /*   if (file.size > MAX_SIZE) {
        alert("حجم الصورة يجب أن يكون أقل من 1 MB");
        return;
    } */

    if (gebi('userNname').innerText.length < 2) {
        gebi('rspns').innerText = '  خانة الإسم فارغة عليك ملأها '
	   gebi('rspns').style.color = 'red'
    }

    // تحويل الصورة Base64
    const base64 = await toBase64(file);
const imgName = localStorage.UserId || 'dadi'
    // إرسال الصورة عبر fetch
    const response = await fetch(WEB_APP_URL, {
        method: "POST",
       // headers: { "Content-Type": "application/json" },
        body: JSON.stringify({action:'postImg', image: base64, name: imgName })
    });

    const result = await response.json();
    
    console.log(result);
    
    if (result.status === "success") {
		localStorage.UserPicture = result.fileId;
		
       gebi('rspns').innerText = 'تم الحفظ بنجاح'
	   gebi('rspns').style.color = 'green';
	  /*  const url = "https://europe-west1-pricealert-31787.cloudfunctions.net/proxyRequestV2";
	   const bodyFtch = {
		action:'saveCont' ,
		name : gebi('userNname').innerText,
		email : localStorage.UserEmail
	   }
	   const response = await fetch(url, {
		method: "POST",
		headers: { "Content-Type": "application/json" },
		body: JSON.stringify({action:'saveCont' ,}),
	}); */
	  setTimeout(() => {
				 gebi('rspns').innerText ='';
			}, 5000);
    } else {
         gebi('rspns').innerText = 'لم يتم الحفظ '
	   gebi('rspns').style.color = 'red'
	  setTimeout(() => {
				 gebi('rspns').innerText ='';
			}, 5000);
    }
});

function toBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result.split(",")[1]);
        reader.onerror = reject;
        reader.readAsDataURL(file);
    });
}




        </script>
	<!-- save image -->
        <script>
			function saveImage(source) {
				const img = document.createElement("img");
				img.src = source;

				// إنشاء canvas مؤقت
				const canvas = document.createElement("canvas");
				const ctx = canvas.getContext("2d");

				// ضبط حجم canvas على حجم الصورة
				canvas.width = img.width;
				canvas.height = img.height;

				// رسم الصورة على canvas
				ctx.drawImage(img, 0, 0, img.width, img.height);

				// استخراج Base64
				const base64 = canvas.toDataURL("image/png");

				// حفظ Base64 في localStorage
				localStorage.setItem("picture", base64);

				//alert("تم تخزين الصورة في LocalStorage!");
			}
		</script>
	</body>
</html>
