<!DOCTYPE html>
<html lang="ar" dir="rtl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="canonical"
			href="https://pricealerts.web.app/signin/index.html"
		/>
		<meta
			name="description"
			content="منصة Price Alerts لتنبيه أسعار العملات الرقمية والأسهم العالمية من عشر منصات تداول و 11 بورصة. تنبيهات فورية وسريعة."
		/>
		<meta
			name="keywords"
			content="تنبيه أسعار, عملات رقمية, أسهم, بورصة, تنبيهات سعر, تداول, Binance, KuCoin, nasdaq,nyse, OKX"
		/>
		<meta name="author" content="Price Alerts" />
		<meta name="robots" content="index, follow" />

		<!-- OG Meta for Social shares -->
		<meta
			property="og:title"
			content="Price Alerts - تنبيهات أسعار العملات الرقمية والأسهم"
		/>
		<meta
			property="og:description"
			content="تنبيهات سعرية فورية لـ 10 منصات تداول و 11 بورصة أسهم."
		/>
		<meta property="og:url" content="https://pricealerts.web.app/" />
		<meta property="og:type" content="website" />
		<meta
			property="og:image"
			content="https://pricealerts.web.app/imgs/web/apple-touch-icon.png"
		/>

		<title>تسجيل الدخول / إنشاء حساب</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>
		<script src="https://accounts.google.com/gsi/client" async defer></script>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://pricealerts.github.io/style/navbar.css"
		/>
		<style>
			/* إعدادات عامة ومتغيرات الألوان */
			:root {
				/* تم تحديث الألوان هنا */
				--primary-color: #007bff; /* الأزرق المطلوب */
				--primary-dark: #0056b3; /* درجة أغمق قليلاً عند التحويم */
				--gradient-start: #0062cc; /* بداية التدرج */
				--gradient-end: #007bff; /* نهاية التدرج */
				--text-color: #333;
				--bg-color: #f0f2f5;
			}

			* {
				box-sizing: border-box;
			}

			body {
				background: var(--bg-color);
				display: flex;
				justify-content: center;
				/* align-items: center; */
				flex-direction: column;
				font-family: "Cairo", sans-serif;
				/* height: 100vh; */
				margin: 0;
			}

			h1 {
				font-weight: 700;
				margin: 0;
				color: var(--text-color);
			}

			p {
				font-size: 14px;
				font-weight: 400;
				line-height: 20px;
				letter-spacing: 0.5px;
				margin: 20px 0 30px;
			}

			span {
				font-size: 12px;
				color: #666;
				margin-bottom: 10px;
				margin-top: 10px;
			}

			.forgot-pass {
				color: #666;
				font-size: 14px;
				text-decoration: none;
				margin: 15px 0;
			}

			/* --- تنسيق أزرار التواصل الاجتماعي --- */
			.social-container {
				margin: 20px 0;
				display: flex;
				gap: 10px;
			}

			.social-container a.social {
				border: 1px solid #dddddd;
				border-radius: 50%;
				display: inline-flex;
				justify-content: center;
				align-items: center;
				margin: 0 5px;
				height: 45px;
				width: 45px;
				color: #555;
				font-size: 18px;
				text-decoration: none;
				transition: all 0.3s ease;
				background-color: #fff;
			}

			/* تأثير عند تمرير الماوس - تم تعديل الخلفية لتكون أزرق فاتح جداً */
			.social-container a.social:hover {
				border-color: var(--primary-color);
				color: var(--primary-color);
				background-color: #e9f2ff; /* خلفية زرقاء فاتحة جداً */
				transform: translateY(-2px);
			}

			/* --- تنسيق الأزرار الرئيسية --- */
			button {
				border-radius: 8px;
				border: 1px solid var(--primary-color);
				background-color: var(--primary-color);
				color: #ffffff;
				font-size: 14px;
				font-weight: 600;
				padding: 12px 45px;
				letter-spacing: 0.5px;
				transition: all 0.3s ease;
				cursor: pointer;
				font-family: "Cairo", sans-serif;
				margin-top: 15px;
			}

			button:hover {
				background-color: var(--primary-dark);
				border-color: var(--primary-dark);
			}

			button:active {
				transform: scale(0.98);
			}

			button:focus {
				outline: none;
			}

			button.ghost {
				background-color: white;
				border-color: var(--primary-color);
				color: var(--primary-color);
				border-width: 2px;
			}
			button.ghost:hover {
				background-color: rgba(255, 255, 255, 0.1);
			}

			form {
				background-color: #ffffff;
				display: flex;
				align-items: center;
				justify-content: center;
				flex-direction: column;
				padding: 0 40px;
				height: 100%;
				text-align: center;
			}

			input {
				background-color: #f3f4f6;
				border: 1px solid #e5e7eb;
				padding: 12px 15px;
				margin: 8px 0;
				width: 100%;
				border-radius: 8px;
				font-family: "Cairo", sans-serif;
				text-align: right;
				outline: none;
				transition: border-color 0.3s;
			}
			input:focus {
				border-color: var(--primary-color);
			}

			/* الحاوية الرئيسية */
			.container {
				background-color: #fff;
				border-radius: 12px;
				box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
				position: relative;
				overflow: hidden;
				width: 850px;
				max-width: 100%;
				min-height: 600px;
				margin: auto;
			}

			.form-container {
				position: absolute;
				top: 0;
				transition: all 0.6s ease-in-out;
			}

			/* تحريك النماذج */
			.sign-in-container {
				left: 0;
				width: 50%;
				z-index: 2;
			}
			.container.right-panel-active .sign-in-container {
				transform: translateX(100%);
			}
			.sign-up-container {
				left: 0;
				width: 50%;
				opacity: 0;
				z-index: 1;
			}
			.container.right-panel-active .sign-up-container {
				transform: translateX(100%);
				opacity: 1;
				z-index: 5;
				animation: show 0.6s;
			}
			.cntinerdd {
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
				max-width: 300px;
				margin: auto;
				margin-top: 20px;
				border: 2px solid #ddd;
				background-color: #eee;
				padding: 20px;
				border-radius: 10px;
			}
			.rsltSignin {
				display: none;
				justify-content: center;
				align-items: center;
				flex-direction: column;
				margin-top: 30px;
			}
			@keyframes show {
				0%,
				49.99% {
					opacity: 0;
					z-index: 1;
				}
				50%,
				100% {
					opacity: 1;
					z-index: 5;
				}
			}

			/* الغطاء الملون - تحديث التدرج للأزرق */
			.overlay-container {
				position: absolute;
				top: 0;
				left: 50%;
				width: 50%;
				height: 100%;
				overflow: hidden;
				transition: transform 0.6s ease-in-out;
				background-color: #4e9aeb;
				z-index: 100;
			}
			.container.right-panel-active .overlay-container {
				transform: translateX(-100%);
			}
			.overlay {
				background: var(--primary-color);
				/* تدرج أزرق جميل */
				background: linear-gradient(
					to right,
					var(--gradient-start),
					var(--gradient-end)
				);
				background-repeat: no-repeat;
				background-size: cover;
				background-position: 0 0;
				color: #ffffff;
				position: relative;
				left: -100%;
				height: 100%;
				width: 200%;
				transform: translateX(0);
				transition: transform 0.6s ease-in-out;
			}
			.container.right-panel-active .overlay {
				transform: translateX(50%);
			}
			.overlay-panel {
				position: absolute;
				display: flex;
				align-items: center;
				justify-content: center;
				flex-direction: column;
				padding: 0 40px;
				text-align: center;
				top: 0;
				height: 100%;
				width: 50%;
				transform: translateX(0);
				transition: transform 0.6s ease-in-out;
			}
			.overlay-left {
				transform: translateX(-20%);
			}
			.container.right-panel-active .overlay-left {
				transform: translateX(0);
			}
			.overlay-right {
				left: 0;
				transform: translateX(0);
			}
			.container.right-panel-active .overlay-right {
				transform: translateX(20%);
			}
			.pirantCntynr {
				padding: 20px;
				background-color: white;
				margin-bottom: 20px;
			}
			/* =========================================
   تعديلات الهاتف (Mobile Responsive)
   ========================================= */
			/* .mobile-text, .mobile-btn { display: none; } */

			@media (max-width: 768px) {
				.container {
					width: 100%;
					border-radius: 0;
					box-shadow: none;
					background: var(--bg-color);
				}
				form {
					background: var(--bg-color);
					padding: 0 20px;
				}
				/*  .pirantCntynr{
    padding: 20px;
    background-color: white;
    margin-bottom: 30px;
    } */
				.overlay-container {
					display: none;
				}
				.sign-in-container,
				.sign-up-container {
					width: 100%;
					position: absolute;
					left: 0;
				}
				.container.right-panel-active .sign-in-container {
					transform: translateX(0);
					opacity: 0;
					z-index: 1;
				}
				.sign-up-container {
					opacity: 0;
					z-index: 1;
				}
				.container.right-panel-active .sign-up-container {
					transform: translateX(0);
					opacity: 1;
					z-index: 5;
				}

				/* إظهار وتنسيق أزرار الموبايل */
				.mobile-text,
				.mobile-btn {
					display: block;
				}
				.mobile-text {
					margin-bottom: 5px;
					margin-top: 25px;
					color: #666;
				}
				.mobile-btn {
					background-color: transparent;
					border-color: var(--primary-color);
					color: var(--primary-color);
					margin-top: 5px;
				}
				.mobile-btn:hover {
					background-color: #e9f2ff; /* تعديل الخلفية هنا أيضاً */
				}
			}
		</style>
	</head>
	<body>
		<div id="pirantCntynr" class="pirantCntynr"></div>
		<div class="container" id="container">
			<br />
			<div class="form-container sign-up-container">
				<form id="frmSgnUp" action="#">
					<h1>إنشاء حساب</h1>
					<span> استخدم بريدك الإلكتروني للتسجيل</span>

					<input type="text" placeholder="الاسم" />
					<input type="email" placeholder="البريد الإلكتروني" />
					<input type="password" placeholder="كلمة المرور" />
					<button>تسجيل</button>
					<span>أو أنشئ حساب ب </span>
					<div class="social-container">
						<div id="buttonSignUp"></div>
					</div>

					<p class="mobile-text" style="margin-bottom: 0; margin-top: 25px">
						لديك حساب بالفعل؟
					</p>
					<button type="button" class="ghost mobile-btn" id="mobileSignIn">
						تسجيل الدخول
					</button>
				</form>
			</div>

			<div class="form-container sign-in-container">
				<form id="frmSgnIn" action="#">
					<h1>تسجيل الدخول</h1>

					<input id="emlSgnUp" type="email" placeholder="البريد الإلكتروني" />
					<input type="password" placeholder="كلمة المرور" />
					<p id="errmsgsgnIn"></p>
					<a href="#" class="forgot-pass">هل نسيت كلمة المرور؟</a>
					<button>دخول</button>
					<span> أو سجل الدخول ب</span>
					<div class="social-container">
						<div id="buttonSignIn"></div>

						<div id="userInfo" class="rsltSignin">
							<img
								id="userImage"
								src=""
								alt="صورة المستخدم"
								style="border-radius: 50%; width: 100px"
							/>
							<h3 id="userName"></h3>
							<p id="userEmail"></p>
						</div>
					</div>
					<p class="mobile-text" style="margin-bottom: 0; margin-top: 25px">
						ليس لديك حساب؟
					</p>
					<button type="button" class="ghost mobile-btn" id="mobileSignUp">
						إنشاء حساب جديد
					</button>
				</form>
			</div>

			<div class="overlay-container">
				<div class="overlay">
					<div class="overlay-panel overlay-left">
						<h1>مرحباً بعودتك!</h1>
						<p>إذا كان لديك حساب قم بتسجيل الدخول</p>
						<button class="ghost" id="signIn">تسجيل الدخول</button>
					</div>
					<div class="overlay-panel overlay-right">
						<h1>أهلاً بك!</h1>
						<p>أدخل تفاصيلك الشخصية وابدأ رحلتك معنا</p>
						<button class="ghost" id="signUp">إنشاء حساب</button>
					</div>
				</div>
			</div>
		</div>
		<!--  Navbar -->
		<script src="https://pricealerts.github.io/js/navbar.js"></script>
		<!--  front end log in  -->
		<script>
			const signUpButton = document.getElementById("signUp");
			const signInButton = document.getElementById("signIn");
			const mobileSignUpBtn = document.getElementById("mobileSignUp");
			const mobileSignInBtn = document.getElementById("mobileSignIn");
			const container = document.getElementById("container");

			function activateSignUp() {
				container.classList.add("right-panel-active");
			}

			function activateSignIn() {
				container.classList.remove("right-panel-active");
			}

			if (signUpButton) signUpButton.addEventListener("click", activateSignUp);
			if (signInButton) signInButton.addEventListener("click", activateSignIn);
			if (mobileSignUpBtn)
				mobileSignUpBtn.addEventListener("click", activateSignUp);
			if (mobileSignInBtn)
				mobileSignInBtn.addEventListener("click", activateSignIn);
		</script>
		<!--  get data from google -->
		<script>
			// دالة لفك تشفير الـ JWT Token الذي ترجعه جوجل
			// هذه الدالة ضرورية لأن جوجل ترسل البيانات مشفرة
			function parseJwt(token) {
				var base64Url = token.split(".")[1];
				var base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
				var jsonPayload = decodeURIComponent(
					window
						.atob(base64)
						.split("")
						.map(function (c) {
							return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
						})
						.join("")
				);

				return JSON.parse(jsonPayload);
			}

			// 2. دالة التعامل مع الاستجابة بعد التسجيل
			function handleCredentialResponse(response) {
				// response.credential هو التوكن المشفر

				// نفك التشفير لاستخراج البيانات
				const responsePayload = parseJwt(response.credential);

				console.log("ID: " + responsePayload.sub);
				console.log("Full Name: " + responsePayload.name);
				console.log("Given Name: " + responsePayload.given_name);
				console.log("Family Name: " + responsePayload.family_name);
				console.log("Image URL: " + responsePayload.picture);
				console.log("Email: " + responsePayload.email);

				// عرض البيانات في الصفحة
				//document.getElementById("userInfo").style.display = "flex";
				localStorage.UserName = responsePayload.name;
				localStorage.UserEmail = responsePayload.email;
				localStorage.UserPicture = responsePayload.picture;
				localStorage.UserId = responsePayload.sub;
				window.location.href = "https://pricealerts.web.app";
				/* document.getElementById("userName").innerText = responsePayload.name;
				document.getElementById("userEmail").innerText = responsePayload.email;
				document.getElementById("userImage").src = responsePayload.picture; */
			}

			// 3. تهيئة الزر عند تحميل الصفحة
			window.onload = function () {
				google.accounts.id.initialize({
					// ⚠️ هام جداً: استبدل هذا بالكلاينت آيدي الخاص بك
					client_id:
						"200237716010-fsre2cg3a1dgm666mb1qcq6gdhntl2sd.apps.googleusercontent.com",
					callback: handleCredentialResponse,
				});
				gogleRender("buttonSignUp");
				gogleRender("buttonSignIn");

				function gogleRender(btn) {
					google.accounts.id.renderButton(
						document.getElementById(btn),
						{ theme: "outline", size: "large" } // خصائص شكل الزر
					);
				}

				// اختياري: إظهار نافذة التسجيل المنبثقة تلقائياً
				google.accounts.id.prompt();
			};
		</script>
		<!--  call farebase -->
		<script>
			function gebi(el) {
				return document.getElementById(el);
			}
			gebi("frmSgnIn").addEventListener("submit", async e => {
				e.preventDefault();
				const acont = document.querySelectorAll("#frmSgnIn input");

				if (acont[0].value.length && acont[1].value.length) {
					const body = {
						action: "getAccont",
						email: acont[0].value,
						password: acont[1].value,
					};

					const rspns = await ftchFnctn(body);

					if (rspns.status == "success") {
						const rslt = rspns.rslt;
						localStorage.UserId = rslt.id;
						localStorage.UserName = rslt.name;
						localStorage.UserEmail = rslt.email;
						localStorage.chtId1 = rslt.chtId1;
						localStorage.chtId2 = rslt.chtId2;
						localStorage.chtIdD3 = rslt.chtId3;
						saveImage(rslt.picture);

						window.location.href = "https://pricealerts.web.app/accont";
					} else if (rspns.status == "NoPassword" || rspns.status == "notexsist") {
						gebi("errmsgsgnIn").innerText =
							"  كلمة السر أو الإيميل خاطئ يرجى التأكد من الحساب";
						gebi("errmsgsgnIn").style.color = "red";
					}else{console.log('rah flelse'); }
				} else {
					gebi("errmsgsgnIn").innerText = "عليك ملأ البيانات";
					gebi("errmsgsgnIn").style.color = "red";
				}
			});

			gebi("frmSgnUp").addEventListener("submit", async e => {
				e.preventDefault();
				const acont = document.querySelectorAll("#frmSgnUp input");
				console.log(acont[1].value.length);

				if (
					acont[0].value.length &&
					acont[1].value.length &&
					acont[2].value.length
				) {
					const now = new Date();
					const idUser = now.getTime();
					const body = {
						action: "addAccont",
						id: idUser,
						name: acont[0].value,
						email: acont[1].value,
						password: acont[2].value,
						picture: "/imgs/web/apple-touch-icon.png",
						chtId1: "",
						chtId2: "",
						chtId3: "",
						paid: false,
					};
					//console.log(body);

					const rspns = await ftchFnctn(body);
					if (rspns.status == "exist") {
						gebi("errmsgsgnIn").innerText =
							"هذا الحساب موجود بالفعل قم بتسجيل الدخول";
						gebi("errmsgsgnIn").style.color = "red";
					} else if (rspns.status == "success") {
						localStorage.id= body.id; 
						localStorage.name = body.name;
						localStorage.email = body.email;
						//localStorage.password = body.password;
						saveImage(body.picture) ;
						localStorage.chtId1 = body.chtId1; //sourceImg=body.sourceImg;
						localStorage.chtId2 = body.chtId2;
						localStorage.chtId3 = body.chtId3;
						localStorage.paid = body.paid;
					}
						window.location.href = "https://pricealerts.web.app/accont";
				} else {
					gebi("errmsgsgnIn").innerText = "عليك ملأ البيانات";
					gebi("errmsgsgnIn").style.color = "red";
				}
			});

		

			

			async function ftchFnctn(body) {
				try {
					const url =
					"https://europe-west1-pricealert-31787.cloudfunctions.net/proxyRequestV2";
				const response = await fetch(url, {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(body),
				});
				console.log(response);
				const data = await response.json();
				console.log(data);
				
				const rspns = JSON.parse(data)
				return rspns;
				} catch (error) {
					console.log('kayn error :'+ error);
					
				}
				
			}
		</script>

		<!-- save image -->
		<script>
			function saveImage(source) {
				const img = document.createElement("img");
				img.src = source;

				// إنشاء canvas مؤقت
				const canvas = document.createElement("canvas");
				const ctx = canvas.getContext("2d");

				// ضبط حجم canvas على حجم الصورة
				canvas.width = img.width;
				canvas.height = img.height;

				// رسم الصورة على canvas
				ctx.drawImage(img, 0, 0, img.width, img.height);

				// استخراج Base64
				const base64 = canvas.toDataURL("image/png");

				// حفظ Base64 في localStorage  UserPicture
				localStorage.setItem("picture", base64);

				//alert("تم تخزين الصورة في LocalStorage!");
			}
		</script>
	</body>
</html>
